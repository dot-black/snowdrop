<!DOCTYPE html>
<html>
  <head>
    <title><%= t("application_name") %></title>
    <%= csrf_meta_tags %>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=<%= Rails.application.credentials.dig(Rails.env.to_sym, :analytics, :tracking_id) %>"></script>
    <script>
      window.dataLayer = window.dataLayer || []
      function gtag() {
        dataLayer.push(arguments)
      }
      gtag('js', new Date())
      gtag('config', '<%= Rails.application.credentials.dig(Rails.env.to_sym, :analytics, :tracking_id)%>')
      document.addEventListener('turbolinks:load', event => {
        if (typeof gtag === 'function') {
          gtag('config', '<%= Rails.application.credentials.dig(Rails.env.to_sym, :analytics, :tracking_id) %>', {
            'page_location': event.data.url
          })
        }
      })
    </script>
  </head>

  <body>
    <%= render 'layouts/header' %>
    <%= render 'layouts/flash'  %>
    <%= yield %>
  </body>
</html>
